(function(){var a,b,c;a={dtr:function(a){return a*Math.PI/180},rtd:function(a){return 180*a/Math.PI},sin:function(a){return Math.sin(this.dtr(a))},cos:function(a){return Math.cos(this.dtr(a))},tan:function(a){return Math.tan(this.dtr(a))},arcsin:function(a){return this.rtd(Math.asin(a))},arccos:function(a){return this.rtd(Math.acos(a))},arctan:function(a){return this.rtd(Math.atan(a))},arccot:function(a){return this.rtd(Math.atan(1/a))},arctan2:function(a,b){return this.rtd(Math.atan2(a,b))},fixAngle:function(a){return this.fix(a,360)},fixHour:function(a){return this.fix(a,24)},fix:function(a,b){return a-=b*Math.floor(a/b),0>a?a+b:a}},c=new b,b=function(b){var c,d,e,f,g,h,c,i,j,k,l,m,n,o,p,q,d,r,s,t,u,v;t={imsak:"Imsak",fajr:"Fajr",sunrise:"Sunrise",dhuhr:"Dhuhr",asr:"Asr",sunset:"Sunset",maghrib:"Maghrib",isha:"Isha",midnight:"Midnight"},o={MWL:{name:"Muslim World League",params:{fajr:18,isha:17}},ISNA:{name:"Islamic Society of North America (ISNA)",params:{fajr:15,isha:15}},Egypt:{name:"Egyptian General Authority of Survey",params:{fajr:19.5,isha:17.5}},Makkah:{name:"Umm Al-Qura University, Makkah",params:{fajr:18.5,isha:"90 min"}},Karachi:{name:"University of Islamic Sciences, Karachi",params:{fajr:18,isha:18}},Tehran:{name:"Institute of Geophysics, University of Tehran",params:{fajr:17.7,isha:14,maghrib:4.5,midnight:"Jafari"}},Jafari:{name:"Shia Ithna-Ashari, Leva Institute, Qum",params:{fajr:16,isha:14,maghrib:4,midnight:"Jafari"}}},g={maghrib:"0 min",midnight:"Standard"},e="MWL",r={imsak:"10 min",dhuhr:"0 min",asr:"Standard",highLats:"NightMiddle"},s="24h",u=["am","pm"],j="-----",p=1,q={},m=void 0,n=void 0,h=void 0,v=void 0,l=void 0,f=g;for(c in o){d=o[c].params;for(k in f)"undefined"==typeof d[k]&&(d[k]=f[k])}e=o[b]?b:e,d=o[e].params;for(i in d)r[i]=d[i];for(c in t)q[c]=0;return{setMethod:function(a){o[a]&&(this.adjust(o[a].params),e=a)},adjust:function(a){var b;for(b in a)r[b]=a[b]},tune:function(a){var b;for(b in a)q[b]=a[b]},getMethod:function(){return e},getSetting:function(){return r},getOffsets:function(){return q},getDefaults:function(){return o},getTimes:function(a,b,c,d,e){return m=1*b[0],n=1*b[1],h=b[2]?1*b[2]:0,s=e||s,a.constructor===Date&&(a=[a.getFullYear(),a.getMonth()+1,a.getDate()]),("undefined"==typeof c||"auto"===c)&&(c=this.getTimeZone(a)),("undefined"==typeof d||"auto"===d)&&(d=this.getDst(a)),v=1*c+(1*d?1:0),l=this.julian(a[0],a[1],a[2])-n/360,this.computeTimes()},getFormattedTime:function(b,c,d){var e,f,g,h;return isNaN(b)?j:"Float"===c?b:(d=d||u,b=a.fixHour(b+.5/60),f=Math.floor(b),g=Math.floor(60*(b-f)),h="12h"===c?d[12>f?0:1]:"",e="24h"===c?this.twoDigitsFormat(f):(f+12-1)%12+1,e+":"+this.twoDigitsFormat(g)+(h?" "+h:""))},midDay:function(b){var c,d;return c=this.sunPosition(l+b).equation,d=a.fixHour(12-c)},sunAngleTime:function(b,c,d){var e,f,g;return e=this.sunPosition(l+c).declination,f=this.midDay(c),g=1/15*a.arccos((-a.sin(b)-a.sin(e)*a.sin(m))/(a.cos(e)*a.cos(m))),f+("ccw"===d?-g:g)},asrTime:function(b,c){var d,e;return e=this.sunPosition(l+c).declination,d=-a.arccot(b+a.tan(Math.abs(m-e))),this.sunAngleTime(d,c)},sunPosition:function(b){var c,d,e,f,g,h,i,j,k;return c=b-2451545,j=a.fixAngle(357.529+.98560028*c),k=a.fixAngle(280.459+.98564736*c),d=a.fixAngle(k+1.915*a.sin(j)+.02*a.sin(2*j)),e=1.00014-.01671*a.cos(j)-14e-5*a.cos(2*j),h=23.439-3.6e-7*c,f=a.arctan2(a.cos(h)*a.sin(d),a.cos(d))/15,i=k/15-a.fixHour(f),g=a.arcsin(a.sin(h)*a.sin(d)),{declination:g,equation:i}},julian:function(a,b,c){var d,e,f;return 2>=b&&(a-=1,b+=12),d=Math.floor(a/100),e=2-d+Math.floor(d/4),f=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(b+1))+c+e-1524.5},computePrayerTimes:function(a){var b,c,d,e,f,g,h,i,j;return a=this.dayPortion(a),b=r,f=this.sunAngleTime(this.eval(b.imsak),a.imsak,"ccw"),e=this.sunAngleTime(this.eval(b.fajr),a.fajr,"ccw"),i=this.sunAngleTime(this.riseSetAngle(),a.sunrise,"ccw"),d=this.midDay(a.dhuhr),c=this.asrTime(this.asrFactor(b.asr),a.asr),j=this.sunAngleTime(this.riseSetAngle(),a.sunset),h=this.sunAngleTime(this.eval(b.maghrib),a.maghrib),g=this.sunAngleTime(this.eval(b.isha),a.isha),{imsak:f,fajr:e,sunrise:i,dhuhr:d,asr:c,sunset:j,maghrib:h,isha:g}},computeTimes:function(){var a,b;for(b={imsak:5,fajr:5,sunrise:6,dhuhr:12,asr:13,sunset:18,maghrib:18,isha:18},a=1;p>=a;)b=this.computePrayerTimes(b),a++;return b=this.adjustTimes(b),b.midnight="Jafari"===r.midnight?b.sunset+this.timeDiff(b.sunset,b.fajr)/2:b.sunset+this.timeDiff(b.sunset,b.sunrise)/2,b=this.tuneTimes(b),this.modifyFormats(b)},adjustTimes:function(a){var b,c;c=r;for(b in a)a[b]+=v-n/15;return"None"!==c.highLats&&(a=this.adjustHighLats(a)),this.isMin(c.imsak)&&(a.imsak=a.fajr-this.eval(c.imsak)/60),this.isMin(c.maghrib)&&(a.maghrib=a.sunset+this.eval(c.maghrib)/60),this.isMin(c.isha)&&(a.isha=a.maghrib+this.eval(c.isha)/60),a.dhuhr+=this.eval(c.dhuhr)/60,a},asrFactor:function(a){var b;return b={Standard:1,Hanafi:2}[a],b||this.eval(a)},riseSetAngle:function(){var a;return a=.0347*Math.sqrt(h),.833+a},tuneTimes:function(a){var b;for(b in a)a[b]+=q[b]/60;return a},modifyFormats:function(a){var b;for(b in a)a[b]=this.getFormattedTime(a[b],s);return a},adjustHighLats:function(a){var b,c;return b=r,c=this.timeDiff(a.sunset,a.sunrise),a.imsak=this.adjustHLTime(a.imsak,a.sunrise,this.eval(b.imsak),c,"ccw"),a.fajr=this.adjustHLTime(a.fajr,a.sunrise,this.eval(b.fajr),c,"ccw"),a.isha=this.adjustHLTime(a.isha,a.sunset,this.eval(b.isha),c),a.maghrib=this.adjustHLTime(a.maghrib,a.sunset,this.eval(b.maghrib),c),a},adjustHLTime:function(a,b,c,d,e){var f,g;return f=this.nightPortion(c,d),g="ccw"===e?this.timeDiff(a,b):this.timeDiff(b,a),(isNaN(a)||g>f)&&(a=b+("ccw"===e?-f:f)),a},nightPortion:function(a,b){var c,d;return c=r.highLats,d=.5,"AngleBased"===c&&(d=1/60*a),"OneSeventh"===c&&(d=1/7),d*b},dayPortion:function(a){var b;for(b in a)a[b]/=24;return a},getTimeZone:function(a){var b,c,d;return d=a[0],b=this.gmtOffset([d,0,1]),c=this.gmtOffset([d,6,1]),Math.min(b,c)},getDst:function(a){return 1*(this.gmtOffset(a)!==this.getTimeZone(a))},gmtOffset:function(a){var b,c,d,e;return e=new Date(a[0],a[1]-1,a[2],12,0,0,0),c=e.toGMTString(),b=new Date(c.substring(0,c.lastIndexOf(" ")-1)),d=(e-b)/36e5},eval:function(a){return 1*(a+"").split(/[^0-9.+-]/)[0]},isMin:function(a){return-1!==(a+"").indexOf("min")},timeDiff:function(b,c){return a.fixHour(c-b)},twoDigitsFormat:function(a){return 10>a?"0"+a:a}}}}).call(this);